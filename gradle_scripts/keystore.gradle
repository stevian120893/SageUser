ext {
    keystoreProperties = new Properties()
    def taskNames = gradle.startParameter.taskNames.join().toString().toLowerCase()
    def isReleaseQa = taskNames.contains("release") || taskNames.contains('qa')
    def keystoreFile = "${!isReleaseQa ? 'debug.' : '' }keystore.properties"
    def keystorePropertiesFile = rootProject.file(keystoreFile)
    if (keystorePropertiesFile.exists()) { keystorePropertiesFile.withInputStream { keystoreProperties.load(it) } }
}

tasks.register('checkKeystore') {
    doLast {
        ['STORE_FILE', 'STORE_PASS', 'KEY_ALIAS', 'KEY_PASS'].each { key -> println "${key}: ${keystoreProperties[key]}" }
    }
}

tasks.register('checkKeystoreQa') {
    dependsOn(checkKeystore)
}

tasks.register('checkKeystoreRelease') {
    dependsOn(checkKeystore)
}
